composer-dependencies:
  image: composer
    stage: dependencies
    script:
      - cd app/backend
      - composer install
    cache:
      key: "$CI_COMMIT_REF_SLUG"
      paths:
        - app/backend/vendor

backend-lint:
  image: composer
  stage: test
  script:
    - cd app/backend
    - composer cs-fixer
  cache:
    key: "$CI_COMMIT_REF_SLUG"
    paths:
      - app/backend/vendor

backend-test:
  image: composer
  stage: test
  script:
    - cd app/backend
    - ./bin/phpunit
  cache:
    key: "$CI_COMMIT_REF_SLUG"
    paths:
      - app/backend/vendor