<div fxFlex fxLayoutAlign="center center">
	<mat-card fxFlex="400px" fxFlex.xs="75">
		<mat-card-header>
			<mat-card-title>
				{{ user.firstName }} {{ user.lastName }}
			</mat-card-title>

			<div fxFlex fxLayoutAlign="flex-end">
				<button mat-icon-button type="button" (click)="this.state.edit = !this.state.edit; toggleFormState()">
					<mat-icon [color]="state.edit ? undefined : 'primary'">edit</mat-icon>
				</button>
			</div>

			<mat-card-subtitle>profil : {{ user.emailAddress }}</mat-card-subtitle>
		</mat-card-header>

		<mat-card-content>
			<form fxLayout="column" [formGroup]="userForm" (ngSubmit)="updateUser()">
				<mat-form-field>
					<mat-label>Prénom</mat-label>
					<input matInput type="text" [formControl]="userForm.controls.firstName">
					<mat-error>{{ getControlErrorMessage(userForm.controls.firstName) | async }}</mat-error>
				</mat-form-field>

				<mat-form-field>
					<mat-label>Nom</mat-label>
					<input matInput type="text" [formControl]="userForm.controls.lastName">
					<mat-error>{{ getControlErrorMessage(userForm.controls.lastName) | async }}</mat-error>
				</mat-form-field>

				<button mat-raised-button type="submit" color="primary"
						[disabled]="!state.edit">Mettre à jour</button>
				<mat-progress-bar *ngIf="state.loading" mode="query"></mat-progress-bar>
			</form>
		</mat-card-content>

		<mat-card-header><mat-card-subtitle>Quelques actions :</mat-card-subtitle></mat-card-header>

		<mat-card-content>
			<ul>
				<li><a routerLink="/profile/events">évenements</a></li>
				<li><a routerLink="/profile/groups">groupes</a></li>
			</ul>
		</mat-card-content>

		<mat-card-actions>
			<button mat-button color="primary" fxFlex (click)="logout()">Se déconnecter?</button>
		</mat-card-actions>
	</mat-card>
</div>
