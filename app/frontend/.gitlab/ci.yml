node-dependencies:
    image: node:16-alpine
    stage: dependencies
    script:
        - cd app/frontend
        - npm install
    cache:
        key: "$CI_COMMIT_REF_SLUG"
        paths:
            - app/frontend/node_modules

frontend-lint:
    image: node:16-alpine
    stage: test
    script:
        - cd app/frontend
        - npm run lint
    cache:
        key: "$CI_COMMIT_REF_SLUG"
        paths:
            - app/frontend/node_modules

frontend-test:
    image: markhobson/node-chrome:latest
    stage: test
    script:
        - cd app/frontend
        - npm test -- --no-watch --browsers=ChromeHeadlessCI
    cache:
        key: "$CI_COMMIT_REF_SLUG"
        paths:
            - app/frontend/node_modules
